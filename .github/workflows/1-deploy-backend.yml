name: Deploy Backend

on:
  workflow_call:
    secrets:
      RENDER_DEPLOY_HOOK:
        required: true
      BACKEND_URL:
        required: true

jobs:
  deploy-backend:
    name: Deploy Backend to Render
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Render Deploy
        uses: fjogeleit/http-request-action@v1
        with:
          url: ${{ secrets.RENDER_DEPLOY_HOOK }}
          method: POST
          timeout: 30000

      - name: Log Backend Deployment Success
        run: |
          echo "SUCCESS: Backend deployment to Render completed"
          echo "Timestamp: $(date -u '+%Y-%m-%d %H:%M:%S UTC')"
          echo "Backend URL: ${{ secrets.BACKEND_URL }}"
